

<div class="queryarea">
    <a routerLink="/query"><img class="logo" src="assets/diveXplore_.png"></a>
    <span class="headertitle">Cluster Exploration</span>
</div>

<button (click)="showHideClusterList()">Show/Hide Entire Cluster List</button>
<span class="spacer"></span>
Find cluster by text:
<mat-form-field>
    <input type="text" placeholder="Select item" matInput [formControl]="itemCtrl" [matAutocomplete]="auto">
    <mat-autocomplete #auto="matAutocomplete" (optionSelected)="queryClusterFromSelectBox($event)" [displayWith]="displayFn">
      <mat-option *ngFor="let item of filteredItems | async" [value]="item">
        {{ item.name }} ({{ item.count}})
      </mat-option>
    </mat-autocomplete>
</mat-form-field>
  


<div *ngIf="showClusterList" class="link-container">
    <div class="link-list">
      <p *ngFor="let c of clusters" (click)="queryCluster(c.cluster_id)">{{c.cluster_id}}: {{c.name}} ({{c.count}})</p> &nbsp;&nbsp;
    </div>
</div>


<!--
<div class="iframe-container">
    <iframe sandbox="allow-scripts" [src]="selectedLink?.url | safe"></iframe>
</div>
-->
<div *ngIf="showZoomedSummary" class="videopreview" #videopreview>
    <button class="videosummaryheader" (click)="showVideoShots(this.summaries[this.selectedSummary])"> {{this.summaries[this.selectedSummary]}}</button><br/>
    <img class="zoom" [src]="summariesBase + '/' + summaries[selectedSummary]" (click)="closeSummary()">
</div>

<div class="cluster">
  <!--<img *ngFor="let img of summaries" [src]="summariesBase + '/' + img" (click)="showVideoShots(img)">-->
  <img class="image" *ngFor="let img of summaries; let i = index" [src]="summariesBase + '/' + img" (click)="selectSummary(i)">
</div>


<!--<div class="cluster" [innerHTML]="selectedLink?.content"></div> -->


  
<div class="statusbar">
    <span class="{{clipService.connectionState}}">CLIP</span>
    <span class="{{nodeService.connectionState}}">Node</span>
    <span class="{{vbsService.vbsServerState}}">DRES</span>
  <!--
    CLIP server: <button class="{{clipService.connectionState}}" (click)="checkCLIPConnection()">{{clipService.connectionState}}</button>
    Node server: <button class="{{nodeService.connectionState}}" (click)="checkNodeConnection()">{{nodeService.connectionState}}</button>
    VBS Server: <button class="{{vbsService.vbsServerState}}" (click)="checkVBSServerConnection()">{{vbsService.vbsServerState}}</button>
  -->
  
    &nbsp; 
    <span>User: {{vbsService.activeUsername}}</span>
  
    <!--
    <span class="whiteColor">Topic Answer:</span> 
    <input type="text" id="topicanswer" name="topicanswer" ngModel #inputfield [(ngModel)]="topicanswer" (keyup.enter)="sendTopicAnswer()" autofocus (focus)="onAnswerInputFocus()" (blur)="onAnswerInputBlur()" />
    <button class="topicanswerbutton" (click)="sendTopicAnswer()">Submit</button>
    -->
  
    <span class="spacer">&nbsp;</span>
  
    <span>
      <select class="grayBackground" [(ngModel)]="this.selectedServerRun" value="0" (change)="selectRun()">
        <option *ngFor="let r of this.vbsService.serverRuns; let i = index" [ngValue]="i" [selected]="(i === 0 && this.selectedServerRun === undefined) || (i === +this.selectedServerRun!)">{{r}}</option>
      </select>
    </span>
    &nbsp;
    <span>{{statusTaskInfoText}}</span>
    &nbsp;
    <span class="remainingTimeInfo">{{statusTaskRemainingTime}}</span>
    
  
  </div>
    
  <br/>&nbsp;
  <br/>&nbsp;
  <br/>&nbsp;