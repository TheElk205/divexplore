<div class="queryarea">
  <img class="logo" src="assets/diveXplore_.png">
  <select [(ngModel)]="selectedDataset" (change)="performQuery()">
    <option *ngFor="let d of datasets" [ngValue]="d.id">{{d.name}}</option>
  </select>
  <input type="text" id="queryinput" name="queryinput" ngModel #inputfield [(ngModel)]="queryinput" (keyup.enter)="performQuery()" (focus)="onQueryInputFocus()" (blur)="onQueryInputBlur()" autofocus/>
  <button (click)="performQuery()">Search</button>
  <button (click)="resetQuery()">x</button>
</div>

<div class="queryarea">
  Pages: 
  <mat-button-toggle-group [(ngModel)]="selectedPage">
    <mat-button-toggle *ngFor="let p of pages" [value]="p" (click)="performQuery()" [disabled]="totalReturnedResults == 0">{{p}}</mat-button-toggle> 
  </mat-button-toggle-group>
</div>
  
<br/>

<div class="queryresult" *ngFor="let item of queryresults; let i = index">
  <div class="videolabel">{{this.queryresult_ids[i]}}</div>
  <div class="resultnum">{{this.queryresult_num[i]}}.</div>
  <img src="{{this.getBaseURL() + '/' + item}}" width="320" height="180">
  <div class="resultactions">
    <a href="/shots/{{this.queryresult_ids[i]}}">Shots</a>
  </div>
  <button class="submitbutton" (click)="submitResult(i)">Submit</button>
</div>

<div class="statusbar">
  Query server: <button class="{{clipSocketWorkerState}}" (click)="checkCLIPConnection()">{{clipSocketWorkerState}}</button>
  VBS Server: <button class="{{vbsServerState}}" (click)="checkVBSServerConnection()">{{vbsServerState}}</button>
  <span class="help">SHORTCUTS: <b>1-9</b>: goto page, <b>left/right/tab</b>: switch page, <b>q</b>: edit query, <b>x</b>: reset query</span>
</div>